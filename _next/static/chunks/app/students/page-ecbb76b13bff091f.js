(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{3591:function(e,t,r){Promise.resolve().then(r.bind(r,6267))},580:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(3827),a=r(7907),l=r(1399);function n(e){let{onClick:t}=e,r=(0,a.useRouter)();return(0,s.jsxs)("button",{onClick:()=>{t?t():r.back()},className:"mb-4 flex items-center gap-2 text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200 transition-colors",children:[(0,s.jsx)(l.x_l,{}),(0,s.jsx)("span",{children:"Back"})]})}},6267:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var s=r(3827),a=r(4090),l=r(7907),n=r(580),o=r(1399);function i(){let e=(0,l.useRouter)(),[t,r]=(0,a.useState)(""),[i,c]=(0,a.useState)(()=>"true"===localStorage.getItem("darkMode")),[d,u]=(0,a.useState)([]),[m,g]=(0,a.useState)([]),[b,h]=(0,a.useState)(!1),[f,x]=(0,a.useState)(""),[p,y]=(0,a.useState)({id:"",name:"",rollNumber:"",classId:"",class:""}),[N,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("userRole");e&&r(e),j(),S()},[]),(0,a.useEffect)(()=>{localStorage.setItem("darkMode",i.toString())},[i]);let j=()=>{let e=localStorage.getItem("studentProfiles");e&&u(JSON.parse(e))},S=()=>{let e=localStorage.getItem("classrooms");e&&g(JSON.parse(e))},w=(e,t)=>{let r=d.filter(t=>t.id!==e);u(r),localStorage.setItem("studentProfiles",JSON.stringify(r));let s=JSON.parse(localStorage.getItem("studentDatabase")||"[]").filter(t=>t.id!==e);localStorage.setItem("studentDatabase",JSON.stringify(s));let a=m.map(t=>({...t,students:t.students.filter(t=>t.id!==e)}));g(a),localStorage.setItem("classrooms",JSON.stringify(a)),localStorage.removeItem("studentProfile_".concat(t));let l=localStorage.getItem("studentProfiles");if(l){let e=JSON.parse(l).filter(e=>e.rollNumber!==t);localStorage.setItem("studentProfiles",JSON.stringify(e))}},O=e=>{v(e)},C=()=>{if(!N)return;let e=d.some(e=>e.name.toLowerCase()===N.name.toLowerCase()&&e.classId===N.classId&&e.id!==N.id),t=d.some(e=>e.rollNumber.toLowerCase()===N.rollNumber.toLowerCase()&&e.id!==N.id);if(e){alert("A student with this name already exists in this class");return}if(t){alert("A student with this roll number already exists");return}let r=d.map(e=>e.id===N.id?N:e);u(r),localStorage.setItem("studentProfiles",JSON.stringify(r));let s=JSON.parse(localStorage.getItem("studentDatabase")||"[]").map(e=>e.id===N.id?{...N,lastUpdated:new Date().toISOString()}:e);localStorage.setItem("studentDatabase",JSON.stringify(s));let a=m.map(e=>({...e,students:e.students.map(e=>e.id===N.id?N:e)}));g(a),localStorage.setItem("classrooms",JSON.stringify(a)),v(null)},I=f?m.find(e=>e.id===f):null;return"lecturer"!==t?(0,s.jsx)("div",{className:"p-8 text-center",children:"Access denied"}):(0,s.jsx)("div",{className:"min-h-screen p-8 ".concat(i?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"),children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(n.Z,{}),(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Students"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("select",{value:f,onChange:e=>x(e.target.value),className:"px-4 py-2 rounded-lg ".concat(i?"bg-gray-800 text-white border-gray-700":"bg-white border-gray-300"," border"),children:[(0,s.jsx)("option",{value:"",children:"Select Class"}),m.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.classCode,")"]},e.id))]}),(0,s.jsxs)("button",{onClick:()=>h(!0),disabled:!f,className:"px-4 py-2 rounded-lg flex items-center space-x-2 ".concat(f?i?"bg-blue-600 hover:bg-blue-700":"bg-blue-500 hover:bg-blue-600":"bg-gray-400 cursor-not-allowed"," text-white"),children:[(0,s.jsx)(o.Bj$,{}),(0,s.jsx)("span",{children:"Add Student"})]}),(0,s.jsxs)("button",{onClick:()=>{if(!f){alert("Please select a class first");return}let e=m.find(e=>e.id===f);if(e){let t=JSON.parse(localStorage.getItem("studentDatabase")||"[]"),r=new Set(e.students.map(e=>e.id)),s=t.filter(e=>!r.has(e.id));if(0===s.length){alert("No new students to add to this class");return}let a=s.map(t=>({...t,classId:f,class:e.name})),l={...e,students:[...e.students,...a]},n=m.map(e=>e.id===f?l:e);g(n),localStorage.setItem("classrooms",JSON.stringify(n));let o=[...d,...a];u(o),localStorage.setItem("studentProfiles",JSON.stringify(o));let i=t.map(e=>a.find(t=>t.id===e.id)?{...e,enrolledClasses:[...e.enrolledClasses||[],f],lastUpdated:new Date().toISOString()}:e);localStorage.setItem("studentDatabase",JSON.stringify(i)),alert("Successfully enrolled ".concat(a.length," new students in ").concat(e.name))}},disabled:!f,className:"px-4 py-2 rounded-lg flex items-center space-x-2 ".concat(f?i?"bg-green-600 hover:bg-green-700":"bg-green-500 hover:bg-green-600":"bg-gray-400 cursor-not-allowed"," text-white"),children:[(0,s.jsx)(o.Mp$,{}),(0,s.jsx)("span",{children:"Load Students"})]}),(0,s.jsxs)("button",{onClick:()=>{e.push("/student-database")},className:"px-4 py-2 rounded-lg flex items-center space-x-2 ".concat(i?"bg-purple-600 hover:bg-purple-700":"bg-purple-500 hover:bg-purple-600"," text-white"),children:[(0,s.jsx)(o.i1q,{}),(0,s.jsx)("span",{children:"Student Database"})]})]})]}),b&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"p-6 rounded-lg shadow-xl max-w-md w-full ".concat(i?"bg-gray-800":"bg-white"),children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["Add New Student to ",null==I?void 0:I.name]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Student Name"}),(0,s.jsx)("input",{type:"text",value:p.name,onChange:e=>y({...p,name:e.target.value}),className:"w-full p-2 rounded border ".concat(i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"),placeholder:"Enter student name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Roll Number"}),(0,s.jsx)("input",{type:"text",value:p.rollNumber,onChange:e=>y({...p,rollNumber:e.target.value}),className:"w-full p-2 rounded border ".concat(i?"bg-gray-700 border-gray-600 text-white":"bg-white border-gray-300"),placeholder:"Enter roll number"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 mt-6",children:[(0,s.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 rounded-lg bg-gray-500 hover:bg-gray-600 text-white",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{if(!f){alert("Please select a class first");return}if(p.name.trim()&&p.rollNumber.trim()){let e=d.some(e=>e.name.toLowerCase()===p.name.toLowerCase()&&e.classId===f),t=d.some(e=>e.rollNumber.toLowerCase()===p.rollNumber.toLowerCase());if(e){alert("A student with this name already exists in this class");return}if(t){alert("A student with this roll number already exists");return}let r=Date.now().toString(),s=m.find(e=>e.id===f);if(!s){alert("Selected class not found");return}let a={...p,id:r,classId:f,class:s.name},l=[...d],n=JSON.parse(localStorage.getItem("studentDatabase")||"[]");l.push(a),n.push({...a,lastUpdated:new Date().toISOString()}),u(l),localStorage.setItem("studentProfiles",JSON.stringify(l)),localStorage.setItem("studentDatabase",JSON.stringify(n));let o=m.map(e=>e.id===f?{...e,students:[...e.students,a]}:e);g(o),localStorage.setItem("classrooms",JSON.stringify(o)),y({id:"",name:"",rollNumber:"",classId:"",class:""}),h(!1)}else alert("Please fill in all required fields")},className:"px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white",children:"Add Student"})]})]})]})}),I&&(0,s.jsxs)("div",{className:"p-6 rounded-lg shadow-lg ".concat(i?"bg-gray-800":"bg-white"),children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:[I.name," (",I.classCode,")"]}),0===I.students.length?(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"No students enrolled yet"}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.students.map(e=>(0,s.jsx)("div",{className:"p-4 rounded-lg shadow-md ".concat(i?"bg-gray-700":"bg-gray-50"),children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"flex-grow",children:(null==N?void 0:N.id)===e.id?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("input",{type:"text",value:N.name,onChange:e=>v({...N,name:e.target.value}),className:"w-full p-2 rounded border ".concat(i?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300"),placeholder:"Student Name"}),(0,s.jsx)("input",{type:"text",value:N.rollNumber,onChange:e=>v({...N,rollNumber:e.target.value}),className:"w-full p-2 rounded border ".concat(i?"bg-gray-600 border-gray-500 text-white":"bg-white border-gray-300"),placeholder:"Roll Number"}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:C,className:"px-3 py-1 rounded bg-green-500 hover:bg-green-600 text-white",children:"Save"}),(0,s.jsx)("button",{onClick:()=>v(null),className:"px-3 py-1 rounded bg-gray-500 hover:bg-gray-600 text-white",children:"Cancel"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Roll No: ",e.rollNumber]})]})}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("button",{onClick:()=>O(e),className:"p-2 rounded-full text-blue-500 hover:bg-blue-100 dark:hover:bg-blue-900",children:(0,s.jsx)(o.fmQ,{})}),(0,s.jsx)("button",{onClick:()=>w(e.id,e.rollNumber),className:"p-2 rounded-full text-red-500 hover:bg-red-100 dark:hover:bg-red-900",children:(0,s.jsx)(o.Xm5,{})})]})]})},e.id))})]})]})})}},7907:function(e,t,r){"use strict";var s=r(5313);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},158:function(e,t,r){"use strict";r.d(t,{w_:function(){return d}});var s=r(4090),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=s.createContext&&s.createContext(a),n=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var s,a;s=t,a=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(u,o({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:a,size:l,title:i}=e,d=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)r=l[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,n),u=l||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&s.createElement("title",null,i),e.children)};return void 0!==l?s.createElement(l.Consumer,null,e=>t(e)):t(a)}}},function(e){e.O(0,[699,971,69,744],function(){return e(e.s=3591)}),_N_E=e.O()}]);